; ------------------------------------------------------------------
; --  _____       ______  _____                                    -
; -- |_   _|     |  ____|/ ____|                                   -
; --   | |  _ __ | |__  | (___    Institute of Embedded Systems    -
; --   | | | '_ \|  __|  \___ \   Zurich University of             -
; --  _| |_| | | | |____ ____) |  Applied Sciences                 -
; -- |_____|_| |_|______|_____/   8401 Winterthur, Switzerland     -
; ------------------------------------------------------------------
; --
; -- main.s
; --
; -- CT1 P03 Transferbefehle
; --
; -- $Id: transbf.s 552 2014-09-01 15:06:12Z muln $
; ------------------------------------------------------------------
;Directives
        PRESERVE8
        THUMB

; ------------------------------------------------------------------
; -- Symbolic Literals
; ------------------------------------------------------------------
MY_CONST                EQU     0x12
ADDR_DIP_SWITCH_31_0    EQU     0x60000200
ADDR_LED_31_0           EQU     0x60000100

; ------------------------------------------------------------------
; -- Variables
; ------------------------------------------------------------------
        AREA MyAsmVar, DATA, READWRITE

store_table             SPACE   16  ; reserve 16 byte (4 words) 
        ALIGN

; ------------------------------------------------------------------
; -- Constants
; ------------------------------------------------------------------
        AREA MyAsmConst, DATA, READONLY
            
addr_dip_switch     DCD     0x60000200
const_table         DCD     0x01234567, 0x12345678, 0x99996666, 0x34567890
        ALIGN

; ------------------------------------------------------------------
; -- MyCode
; ------------------------------------------------------------------
        AREA MyCode, CODE, READONLY

main    PROC
        EXPORT main
            
		LDR   R0,=0x00121000
		LDR   R1,=0x12341111
		PUSH  {R0,R1}
		ADDS  R3,R1,R0  ;0x12462111
		ADD   R2,SP,#0
		PUSH  {R2,R3}
		ADD   SP,SP,#4
		POP   {R4}
		MOV   SP, R2
		POP   {R5}

        B       main
        
        ALIGN

; ------------------------------------------------------------------
; End of code
; ------------------------------------------------------------------
        ENDP
        END
